var mongoose = require("mongoose")
, Pin = mongoose.model("Pin");

exports.index = function(req, res){
    res.send("Welcome to cs");
}

exports.pilates = function(req, res){
	var video_id = req.query.v;
	res.render('pilates', {id:video_id}, function(err, html){
		res.send(html);	
	})
}

exports.pinterless = function(req, res){

	Pin.find({}, function(err, all_pins){
		var output = "Pins: " + JSON.stringify(all_pins);
		console.log(output);	
		res.render("pinterless", { pins: all_pins }, function(err, html){
			res.send(html)
})
	
});			

exports.createPin = function(req, res){

	var newPin = new Pin({
		title: req.body.title,
		description: req.body.description,
		image_url: req.body.image_url
	});

	newPin.save(function(err){
		if(err) { console.log("Error saving pin: " + err)}
		else{
			res.redirect('/pinterless');
		}
	       })

}
